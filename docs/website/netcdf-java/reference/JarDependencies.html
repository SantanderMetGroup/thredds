<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>CDM Dependencies</title>
    <link href="../cdm.css" rel="stylesheet" type="text/css"/>
</head>

<body>
<h1>CDM / Netcdf Library Dependencies Version 4.6</h1>
<hr/>
<h2>Which jar file should I use?</h2>

<h3>If you dont use maven to build:</h3>

<p> The simplest thing to do is to use <code>netcdfAll-${version}.jar</code>.This includes all other jars, and uses
    JDK logging. Use it when you want all the capabilities of the netCDF-Java/CDM library, and are not concerned about
    jar size and compatiblity with other libraries, and you don't use maven to build.</p>

<h3>If you do use maven to build (recommended):</h3>

<p>First, you need to add the Unidata Releases repository to your Maven configuration file (i.e. your project's
    <code>pom.xml</code>). You can do so with the following code snippet:</p>

<pre>
&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;unidata-releases&lt;/id&gt;
        &lt;name>UNIDATA Releases&lt;/name&gt;
        &lt;url&gt;https://artifacts.unidata.ucar.edu/content/repositories/unidata-releases/&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
</pre>


<p>Next, add the actual dependencies to the <code>dependencies</code> section of your <code>pom.xml</code>.
    In the minimal case, you'll just use <code>cdm</code> and an slf4j logger. This allows you to read netCDF3/4
    files (and a number of others file types that are in the cdm code module). An example using JDK14 logging:</p>

<pre>
&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;cdm&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;
    
&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;
  &lt;version&gt;1.7.5&lt;/version&gt;
&lt;/dependency&gt;
</pre>

<p>In the maximal case, you'll include all the modules and an slf4j logger. This gives you the same
    functionality as <code>netcdfAll-${version}.jar</code>, but keeps the dependent jars separate.
    Example using log4j2 logging:</p>

<pre>
&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;cdm&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;clcommon&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;bufr&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;grib&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;netcdf4&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;opendap&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;edu.ucar&lt;/groupId&gt;
  &lt;artifactId&gt;visadCdm&lt;/artifactId&gt;
  &lt;version&gt;${version}&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
  &lt;version&gt;1.7.5&lt;/version&gt;
&lt;/dependency&gt;

&lt;dependency&gt;
  &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
  &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
  &lt;version&gt;1.7.5&lt;/version&gt;
&lt;/dependency&gt;
</pre>

<p>You can include any or all of the above components.</p>


<h3>Not using maven, but you want to choose which components to use:</h3>

<ol>
    <li>Always include <code>netcdf-${version}.jar</code>, <code>jdom.jar</code>,
        <code>jodatime.jar</code>, and a logger
  </li>
    <li>Optionally include:
        <ul>
            <li>Reading BUFR files: <code>bufr.jar</code></li>
            <li>Reading GRIB files: <code>grib.jar</code>, <code>protobuf.jar</code></li>
            <li>Reading OPeNDAP: <code>opendap.jar</code>, <code>commons-httpclient.jar</code>, <code>commons-logging.jar</code>, <code>commons-codec.jar</code>.
            </li>
            <li>Reading remote files over HTTP: <code>commons-httpclient.jar</code>, <code>commons-logging.jar</code>, <code>commons-codec.jar</code></li>
            <li>Reading McIDAS or GEMPAK files, or for accessing ADDE: <code>visadCdm.jar</code></li>
            <li>Reading GEMPAK GRID files: <code>visadCdm.jar</code>, <code>grib.jar</code></li>
            <li>Using aggregations: <code>je.jar</code> (Berkely DB, Java Edition)</li>
            <li>Object caching: <code>ehcache.jar</code></li>
            <li>Using ncstream, cdmRemote: <code>protobuf.jar</code><br/>
            </li>
        </ul>
    </li>
</ol>

<h3>Using the UI classes:</h3>

<p>When you also want to use the UI classes, you can either use the "all in one"
    <code>toolsUI-${version}.jar</code> or the unbundled <code>netcdfUI-${version}.jar</code>. For the unbundled
    case, follow the same process for the
    unbundled CDM library (above), along with these optional jars:
</p>

<ol>
    <li> GUI resources (icons, map overlays): <code>resourcesOptional.jar</code></li>
    <li>Dependency injection with the <a href="http://www.springsource.org/">Spring</a> framework:
        <code>spring.jar</code></li>
    <li>Java user interface (Look and Feel, forms layout) using <a href="http://www.jgoodies.com/">JGoodies</a>:
        <code>forms.jar</code></li>
    <li>Editing XML with <a href="http://www.edankert.com/bounce/">XMLEditorKit</a>: <code>bounce.jar</code></li>
    <li>Creating graphs with <a href="http://www.jfree.org/jfreechart/">JFreeChart</a>: <code>jfreechart.jar</code>, <code>jcommon.jar</code><br>
    </li>
</ol>

<hr/>

<h2><a name="logging" id="logging">Logging</a></h2>

The Netcdf-Java library uses the <a href="http://www.slf4j.org/">SLF4J</a> logging facade. This allows applications to
select their own logging implementation, by including the correct jar files on the classpath at runtime.
You always need the SLF4J API jar: <code>slf4j-api-${version}.jar</code>.
You also must choose a logging implementation. Common choices are:

<h3>1) <a href="http://java.sun.com/j2se/1.4.2/docs/guide/util/logging/">JDK Logging</a></h3>

<ul>
    <li>You must include the SLF4J to JDK Logging interface jar: <code>slf4j-jdk14-${version}.jar.</code></li>
    <li>The actual logging is implemented in the java.util.log package, part of the Java runtime.</li>
</ul>

To configure JDK logging:

<ul>
    <li>Modify the file <code>$JAVA_HOME/jre/lib/logging.properties</code>. Or override this by setting the system
        property <code>java.util.logging.config.file</code>
        to the name of your properties file.
    </li>
    <li>Possible log levels are SEVERE, WARNING, INFO, CONFIG, FINE, FINER, FINEST or ALL</li>
    <li>To show only SEVERE messages for all loggers:
        <pre>.level= SEVERE</pre>
    </li>
</ul>

You can also set the configuration by using
<a href="http://java.sun.com/j2se/1.4.2/docs/api/java/util/logging/LogManager.html">java.util.logging.LogManager</a>
from your application. most likely by creating your own properties file or resources and calling:

<pre>
FileInputStream inputStream = new FileInputStream("my.properties");
LogManager lm = java.util.logging.LogManager.getLogManager();
lm.readConfiguration(inputStream);</pre>

<h3>2) <a href="http://logging.apache.org/log4j/1.2/index.html">log4j</a></h3>

<ul>
    <li> You must include the SLF4J to log4j interface jar: <code>slf4j-log4j12-${version}.jar</code>, and the log4j
        implementation jar: <code>log4j-${version}.jar</code> in your classpath.
  </li>
    <li>You should then <a href="http://logging.apache.org/log4j/1.2/manual.html">configure</a> the logging by adding a
        log4j.xml config file to your classpath. A minimal version is:
    </li>
</ul>

<pre>
&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;<br/>&lt;log4j:configuration xmlns:log4j='http://jakarta.apache.org/log4j/'&gt;
  &lt;appender name="applog" class="org.apache.log4j.RollingFileAppender"&gt;
    &lt;param name="File" value="mylog/app.log"/&gt;
    &lt;param name="MaxFileSize" value="10MB"/&gt;
    &lt;param name="MaxBackupIndex" value="10"/&gt;
  &lt;/appender&gt;

  &lt;root&gt;
    &lt;level value="WARN"/&gt;
    &lt;appender-ref ref="applog"/&gt;
  &lt;/root&gt;
&lt;/log4j:configuration&gt;
</pre>

<h3>3) See <a href="http://www.slf4j.org/">SLF4J</a> pages for more possibilities.</h3>

<hr width="100%"/>

<address>
    <img src="../nc.gif" alt="" width="64" height="64"/>This document was last updated June 2015.
</address>
</body>
</html>
